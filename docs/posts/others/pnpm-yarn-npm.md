---
title: pnpm与yarn与npm
date: 2025-04-27 10:48:13
---

## 幽灵依赖

一切是开始, 是我在rspress开发静态博客时，一开始选择 npm 后改用 pnpm

于是，有些包报错无法找到引用，这些包的特点是

 **package.json 内没有显示引用，而是作为依赖包的依赖被下载** 

这就是 npm的幽灵依赖问题，可以认为是pnpm有了更严格的要求

## 本质区别

| 特性              | npm                 | yarn                     | pnpm                          |
| ----------------- | ------------------- | ------------------------ | ----------------------------- |
| 存储结构          | 多层嵌套            | 多层嵌套（改善依赖冲突） | 内容寻址，全局 store + 硬链接 |
| 安装机制          | 顺序安装            | 并行安装                 | 并行 + 去重 + 链接            |
| 锁文件名          | `package-lock.json` | `yarn.lock`              | `pnpm-lock.yaml`              |
| 工作区支持        | v7+ 支持（原生）    | 原生支持                 | 原生支持（更强）              |
| 依赖提升（hoist） | 默认自动提升        | 可配置                   | 默认隔离，支持配置提升        |

## 参考链接

[pnpm、npm、yarn 包管理工具『优劣对比』及『环境迁移』](https://juejin.cn/post/7286362110211489855)
